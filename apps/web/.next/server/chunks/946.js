exports.id=946,exports.ids=[946],exports.modules={2113:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4424,23)),Promise.resolve().then(r.t.bind(r,7752,23)),Promise.resolve().then(r.t.bind(r,5275,23)),Promise.resolve().then(r.t.bind(r,9842,23)),Promise.resolve().then(r.t.bind(r,1633,23)),Promise.resolve().then(r.t.bind(r,9224,23))},1404:()=>{},1847:(e,t,r)=>{"use strict";r.d(t,{Vm:()=>o,aC:()=>h,eE:()=>p,L8:()=>g,qr:()=>n,Id:()=>d,Wq:()=>c});var s=r(1341),a=r(780);let l={user:{id:null,name:null,email:null},isLoading:!1,theme:"light"},n=(0,s.Ue)()((0,a.mW)((0,a.tJ)(e=>({...l,setUser:t=>e(e=>({user:{...e.user,...t}}),!1,"setUser"),setLoading:t=>e({isLoading:t},!1,"setLoading"),setTheme:t=>e({theme:t},!1,"setTheme"),reset:()=>e(l,!1,"reset")}),{name:"melog-app-store",partialize:e=>({theme:e.theme})}),{name:"app-store"})),i={entries:[],currentEntry:null,isRecording:!1},c=(0,s.Ue)()((0,a.mW)((0,a.tJ)((e,t)=>({...i,addEntry:t=>e(e=>({entries:[...e.entries,{...t,id:`emotion_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date}]}),!1,"addEntry"),updateEntry:(t,r)=>e(e=>({entries:e.entries.map(e=>e.id===t?{...e,...r}:e)}),!1,"updateEntry"),deleteEntry:t=>e(e=>({entries:e.entries.filter(e=>e.id!==t)}),!1,"deleteEntry"),setCurrentEntry:t=>e({currentEntry:t},!1,"setCurrentEntry"),setRecording:t=>e({isRecording:t},!1,"setRecording"),getEntriesByDateRange:(e,r)=>{let{entries:s}=t();return s.filter(t=>t.timestamp>=e&&t.timestamp<=r)}}),{name:"melog-emotion-store",storage:{getItem:e=>{let t=localStorage.getItem(e);if(!t)return null;let{state:r}=JSON.parse(t);return{state:{...r,entries:r.entries?.map(e=>({...e,timestamp:new Date(e.timestamp)}))||[]}}},setItem:(e,t)=>{let{state:r}=t;localStorage.setItem(e,JSON.stringify({state:{...r,entries:r.entries?.map(e=>({...e,timestamp:e.timestamp.toISOString()}))||[]}}))},removeItem:e=>localStorage.removeItem(e)}}),{name:"emotion-store"})),o={joy:{name:"기쁨",color:"#FFD700",icon:"\uD83D\uDE0A",darkColor:"#FFA500"},sadness:{name:"슬픔",color:"#4169E1",icon:"\uD83D\uDE22",darkColor:"#1E90FF"},anger:{name:"분노",color:"#DC143C",icon:"\uD83D\uDE20",darkColor:"#FF6347"},fear:{name:"두려움",color:"#8A2BE2",icon:"\uD83D\uDE28",darkColor:"#9370DB"},surprise:{name:"놀람",color:"#FF69B4",icon:"\uD83D\uDE32",darkColor:"#FF1493"},disgust:{name:"혐오",color:"#32CD32",icon:"\uD83E\uDD22",darkColor:"#228B22"}};var u=r(3677);let d=()=>{let[e,t]=(0,u.useState)(!1),[r,s]=(0,u.useState)(!1),[a,l]=(0,u.useState)(0),[n,i]=(0,u.useState)(null),[c,o]=(0,u.useState)(null),[d,m]=(0,u.useState)(""),[x,b]=(0,u.useState)(!1),[f,h]=(0,u.useState)(""),g=(0,u.useRef)(null),p=(0,u.useRef)(null),y=(0,u.useRef)(null),v=(0,u.useRef)([]),D=(0,u.useRef)(null),w=(0,u.useRef)(!1),j=(0,u.useCallback)(()=>{y.current=setInterval(()=>{l(e=>e>=60?(I(),60):e+1)},1e3)},[]),N=(0,u.useCallback)(()=>{y.current&&(clearInterval(y.current),y.current=null)},[]),C=(0,u.useCallback)(()=>{let t=window.SpeechRecognition||window.webkitSpeechRecognition;if(!t){w.current=!1;return}w.current=!0,D.current=new t;let s=D.current;s.continuous=!0,s.interimResults=!0,s.lang="ko-KR",s.onstart=()=>{b(!0),o(null)},s.onresult=e=>{let t="",r="";for(let s=e.resultIndex;s<e.results.length;s++){let a=e.results[s][0].transcript;e.results[s].isFinal?r+=a:t+=a}r&&(m(e=>(e?`${e} ${r}`:r).trim()),h("")),t&&h(t)},s.onerror=e=>{console.error("음성 인식 오류:",e.error),"no-speech"!==e.error&&"audio-capture"!==e.error&&o(`음성 인식 오류: ${e.error}`)},s.onend=()=>{if(b(!1),h(""),e&&!r&&w.current)try{s.start()}catch(e){console.warn("음성 인식 재시작 실패:",e)}}},[e,r]),k=(0,u.useCallback)(()=>{if(D.current&&w.current)try{D.current.start()}catch(e){console.warn("음성 인식 시작 실패:",e)}},[]),S=(0,u.useCallback)(()=>{if(D.current&&w.current)try{D.current.stop()}catch(e){console.warn("음성 인식 정지 실패:",e)}b(!1),h("")},[]),E=(0,u.useCallback)(async()=>{try{o(null),m(""),h(""),C();let e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});p.current=e,v.current=[];let r=new MediaRecorder(e,{mimeType:"audio/webm;codecs=opus"});g.current=r,r.ondataavailable=e=>{e.data.size>0&&v.current.push(e.data)},r.onstop=()=>{let e=new Blob(v.current,{type:"audio/webm;codecs=opus"});i(e),S(),p.current&&(p.current.getTracks().forEach(e=>e.stop()),p.current=null)},r.start(),t(!0),s(!1),j(),setTimeout(()=>{k()},500)}catch(e){console.error("녹음 시작 오류:",e),o("마이크 접근 권한이 필요합니다.")}},[j,C,k,S]),I=(0,u.useCallback)(()=>{g.current&&"inactive"!==g.current.state&&g.current.stop(),S(),t(!1),s(!1),N()},[N,S]),R=(0,u.useCallback)(()=>{g.current&&"recording"===g.current.state&&(g.current.pause(),s(!0),N(),S())},[N,S]),T=(0,u.useCallback)(()=>{g.current&&"paused"===g.current.state&&(g.current.resume(),s(!1),j(),setTimeout(()=>{k()},200))},[j,k]),$=(0,u.useCallback)(()=>{I(),l(0),i(null),o(null),m(""),h(""),v.current=[]},[I]),A=(0,u.useCallback)(e=>{m(e)},[]),F=(0,u.useCallback)(async()=>{if(n)try{let e=new Audio;e.src=URL.createObjectURL(n),await e.play()}catch(e){console.error("재생 오류:",e),o("오디오 재생에 실패했습니다.")}},[n]);return(0,u.useEffect)(()=>()=>{N(),p.current&&p.current.getTracks().forEach(e=>e.stop())},[N]),{isRecording:e,isPaused:r,recordingTime:a,audioBlob:n,error:c,realtimeText:d,isListening:x,interimText:f,startRecording:E,stopRecording:I,pauseRecording:R,resumeRecording:T,resetRecording:$,playRecording:F,updateRealtimeText:A}},m={apiUrl:process.env.NEXT_PUBLIC_STT_URL||"/api/stt",apiKey:process.env.NEXT_PUBLIC_STT_API_KEY||"",language:"ko-KR",maxRetries:3},x=(e,t="audio.webm")=>{let r=new FormData;return r.append("audio",e,t),r.append("language",m.language),r},b=async(e,t={})=>{let r={...m,...t};try{let t=x(e),s=await fetch(r.apiUrl,{method:"POST",headers:{...r.apiKey&&{Authorization:`Bearer ${r.apiKey}`}},body:t});if(!s.ok)throw Error(`STT API 오류: ${s.status} ${s.statusText}`);let a=await s.json();return{success:!0,text:a.text||a.transcript||"",confidence:a.confidence}}catch(e){return console.error("STT 변환 오류:",e),{success:!1,text:"",error:e instanceof Error?e.message:"음성 인식에 실패했습니다."}}},f=async e=>new Promise(e=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){e({success:!1,text:"",error:"Web Speech API를 지원하지 않는 브라우저입니다."});return}try{e({success:!1,text:"",error:"STT API 설정이 필요합니다."})}catch(t){e({success:!1,text:"",error:"Web Speech API 오류가 발생했습니다."})}}),h=async(e,t={})=>{let r={...m,...t};for(let s=1;s<=r.maxRetries;s++)try{let a=await b(e,t);if(a.success)return a;a.error,s<r.maxRetries&&await new Promise(e=>setTimeout(e,1e3*s))}catch(e){e instanceof Error&&e.message,s<r.maxRetries&&await new Promise(e=>setTimeout(e,1e3*s))}return console.warn("STT API 재시도 모두 실패, fallback 사용"),f(e)},g=["조금","조금 많이","적당히","많이","매우"],p=[{name:"기쁨",colors:["#fff1d3","#ffeabc","#ffe09c","#ffdc8f","#f3c96b"]},{name:"슬픔",colors:["#b5defe","#7dc5fe","#70bffe","#40a6f7","#2196f3"]},{name:"분노",colors:["#ffcdd2","#ef9a9a","#e57373","#ef5350","#f44336"]},{name:"평온",colors:["#c8e6c9","#a5d6a7","#81c784","#66bb6a","#4caf50"]},{name:"설렘",colors:["#f3e5f5","#e1bee7","#ce93d8","#ba68c8","#ab47bc"]},{name:"지침",colors:["#fff3e0","#ffe0b2","#ffcc80","#ffb74d","#ff9800"]}]},1601:(e,t,r)=>{"use strict";r.d(t,{hn:()=>p,zx:()=>o,II:()=>m,Ar:()=>g});var s=r(3227),a=r(1126),l=r(2890);function n(...e){return(0,l.m6)((0,a.W)(e))}let i={primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-600 hover:bg-gray-700 text-white",outline:"border border-gray-300 hover:bg-gray-50 text-gray-700",ghost:"hover:bg-gray-100 text-gray-700"},c={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};function o({children:e,className:t,variant:r="primary",size:a="md",isLoading:l=!1,disabled:o,...u}){return(0,s.jsxs)("button",{className:n("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 disabled:pointer-events-none disabled:opacity-50",i[r],c[a],t),disabled:o||l,...u,children:[l&&(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e]})}var u=r(3677);let d=(0,u.forwardRef)(({className:e,label:t,error:r,helperText:a,...l},i)=>(0,s.jsxs)("div",{className:"w-full",children:[t&&s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),s.jsx("input",{className:n("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r&&"border-red-500 focus-visible:ring-red-500",e),ref:i,...l}),r&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:r}),a&&!r&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a})]}));d.displayName="Input";let m=d;var x=r(1847),b=r(1043);let f=[{id:"home",label:"홈",icon:"\uD83C\uDFE0",activeIcon:"\uD83C\uDFE0",path:"/"},{id:"feed",label:"피드",icon:"\uD83D\uDCCA",activeIcon:"\uD83D\uDCCA",path:"/feed"},{id:"calendar",label:"캘린더",icon:"\uD83D\uDCC5",activeIcon:"\uD83D\uDCC5",path:"/calendar"},{id:"profile",label:"마이",icon:"\uD83D\uDC64",activeIcon:"\uD83D\uDC64",path:"/profile"}];function h({className:e=""}){let t=(0,b.useRouter)(),r=(0,b.usePathname)(),a=e=>{r!==e&&t.push(e)};return(0,s.jsxs)("div",{className:`fixed bottom-0 left-1/2 transform -translate-x-1/2 w-[384px] bg-white border-t border-gray-200 shadow-lg ${e}`,children:[s.jsx("div",{className:"flex items-center justify-around py-2",children:f.map(e=>{let t=r===e.path;return(0,s.jsxs)("button",{onClick:()=>a(e.path),className:`flex flex-col items-center justify-center py-2 px-3 min-w-0 flex-1 transition-all duration-200 relative ${t?"text-blue-600":"text-gray-500 hover:text-gray-700 active:text-blue-500"}`,children:[s.jsx("div",{className:`text-xl mb-1 transition-transform duration-200 ${t?"scale-110":"scale-100"}`,children:t?e.activeIcon:e.icon}),s.jsx("span",{className:`text-xs font-medium transition-colors duration-200 ${t?"text-blue-600":"text-gray-500"}`,children:e.label}),t&&s.jsx("div",{className:"absolute bottom-0 w-6 h-0.5 bg-blue-600 rounded-t-full"})]},e.id)})}),s.jsx("div",{className:"flex justify-center pb-2",children:s.jsx("div",{className:"w-32 h-1 bg-gray-300 rounded-full"})})]})}function g({children:e,className:t="",showTabBar:r=!0}){let{theme:a}=(0,x.qr)();return s.jsx("div",{className:"min-h-screen bg-gray-100",children:(0,s.jsxs)("div",{className:"mx-auto w-[384px] bg-white min-h-screen shadow-xl relative",children:[s.jsx("div",{className:`min-h-screen transition-colors duration-300 ${"dark"===a?"dark bg-gray-900":"bg-white"} ${t}`,children:s.jsx("main",{className:`px-4 w-full ${r?"pb-20":""}`,children:e})}),r&&s.jsx(h,{}),s.jsx("div",{className:"hidden lg:block absolute -left-4 top-0 w-1 h-full bg-gray-300 opacity-30"}),s.jsx("div",{className:"hidden lg:block absolute -right-4 top-0 w-1 h-full bg-gray-300 opacity-30"})]})})}function p({onTranscriptionComplete:e,onError:t,maxDuration:r=60,className:a=""}){let[l,n]=(0,u.useState)(!1),[i,c]=(0,u.useState)(""),{isRecording:d,isPaused:m,recordingTime:b,audioBlob:f,error:h,realtimeText:g,isListening:p,interimText:y,startRecording:v,stopRecording:D,pauseRecording:w,resumeRecording:j,resetRecording:N,playRecording:C,updateRealtimeText:k}=(0,x.Id)(),S=e=>`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`,E=b/r*100,I=async()=>{if(g.trim()){c(g.trim()),e?.(g.trim());return}if(f){n(!0),c("");try{let r=await (0,x.aC)(f);if(r.success&&r.text)c(r.text),e?.(r.text);else{let e=r.error||"음성 인식에 실패했습니다.";t?.(e)}}catch(e){t?.("음성 인식 중 오류가 발생했습니다.")}finally{n(!1)}}},R=e=>{k(e.target.value)};return(0,s.jsxs)("div",{className:`w-full space-y-4 ${a}`,children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-1",children:"음성 메모"}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:["최대 ",r,"초까지 녹음할 수 있어요"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${E>90?"bg-red-500":E>70?"bg-yellow-500":"bg-blue-500"}`,style:{width:`${Math.min(E,100)}%`}})}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("span",{className:`text-2xl font-mono ${b>.9*r?"text-red-500":"text-gray-700"}`,children:S(b)}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["/ ",S(r)]})]}),d&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-red-500",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-sm font-medium",children:m?"일시정지됨":"녹음 중..."}),p&&s.jsx("span",{className:"text-xs text-blue-600 ml-2",children:"\uD83C\uDFA4 인식 중"})]}),(g||y)&&(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-blue-700 mb-1",children:"\uD83D\uDDE3️ 실시간 인식 내용"}),s.jsx("textarea",{value:g,onChange:R,className:"w-full bg-transparent text-sm text-blue-800 resize-none border-none outline-none",placeholder:"음성이 인식되면 여기에 표시됩니다...",rows:Math.max(2,Math.ceil(g.length/30))}),y&&(0,s.jsxs)("div",{className:"text-xs text-blue-500 italic opacity-70 mt-1",children:[y,"..."]})]})]}),s.jsx("div",{className:"space-y-3",children:f?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex space-x-2",children:[s.jsx(o,{onClick:C,variant:"outline",className:"flex-1",disabled:l,children:"▶️ 재생"}),s.jsx(o,{onClick:()=>{N(),c("")},variant:"outline",className:"flex-1",disabled:l,children:"\uD83D\uDD04 다시 녹음"})]}),s.jsx(o,{onClick:I,className:"w-full",disabled:l,isLoading:l,children:l?"음성 인식 중...":g.trim()?"\uD83D\uDCDD 실시간 텍스트 사용":"\uD83D\uDCDD 텍스트로 변환"})]}):s.jsx("div",{className:"flex space-x-2",children:d?(0,s.jsxs)(s.Fragment,{children:[s.jsx(o,{onClick:m?j:w,variant:"outline",className:"flex-1",children:m?"▶️ 재개":"⏸️ 일시정지"}),s.jsx(o,{onClick:D,variant:"secondary",className:"flex-1",children:"⏹️ 정지"})]}):s.jsx(o,{onClick:v,className:"flex-1",disabled:l,children:"\uD83C\uDFA4 녹음 시작"})})}),h&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,s.jsxs)("p",{className:"text-sm text-red-700 text-center",children:["⚠️ ",h]})}),i&&(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-green-800 mb-2",children:"\uD83D\uDCDD 변환된 텍스트:"}),s.jsx("p",{className:"text-sm text-green-700",children:i})]}),!d&&!f&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsx("p",{className:"text-xs text-blue-700 text-center",children:"\uD83D\uDCA1 마이크 접근 권한을 허용해주세요. 녹음하면 실시간으로 말하는 내용이 텍스트로 변환됩니다."})}),!d&&f&&g&&(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-green-800 mb-2",children:"\uD83D\uDDE3️ 실시간 인식 결과:"}),s.jsx("textarea",{value:g,onChange:R,className:"w-full bg-white border border-green-300 rounded p-2 text-sm text-green-700 resize-none",rows:Math.max(2,Math.ceil(g.length/30))}),s.jsx("p",{className:"text-xs text-green-600 mt-1",children:"✏️ 내용을 수정할 수 있습니다."})]})]})}},7718:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>n});var s=r(9013),a=r(4111),l=r.n(a);r(5556);let n={title:"ME:LOG - 감정 기록 서비스",description:"사진과 음성을 활용해 하루 1분 만에 감정을 기록하고 AI 분석 결과를 즉시 확인할 수 있는 웹 기반 감정 기록 서비스입니다."};function i({children:e}){return s.jsx("html",{lang:"kr",className:`${l().variable}`,children:s.jsx("body",{className:`${l().variable} font-sans antialiased`,children:e})})}},154:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(7201);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},5556:()=>{}};